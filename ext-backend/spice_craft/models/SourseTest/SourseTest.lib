.subckt SourseTest outsw  n3 StairgenOut SawgenOut TrigenOut Tri2SinOutp Tri2SinOutn AmmOutp AmmOutn PamOutp PamOutn gnd

* 耦合电感
L1 gnd n2 1000M
L2 n3 n4 1000M
K1 L1 L2 0.999

Vsin sin1 gnd  AC 0.0 SIN ( 3.3 0.3 1.0E3 0.0 0.0 0.0 )
Rin sin1 n2 1k
Rout n4 out 1

* 电流控制开关 ION = 开启电流 IOFF = 关断电流
Ycsw CSWITCH out outsw ic:Vsin ION = 0.95 IOFF = 0.5 

* 梯形波发生器 VSTART = 开始电压 VDELTA = 阶跃电压 NSTEP = 电压阶跃数
YSTAIRGEN STAIRGEN StairgenOut gnd PARAM: vstart = 1.0 vdelta = 0.2 nstep = 5.0

* 锯齿波发生器 TDEL = 延迟时间 V0 = 初始电压 V1 = 电压幅值
YSAWGEN SAWGEN SawgenOut gnd PARAM: tdel = 0.0001 v0 = 1.0

* 三角波发生器 V0 = 初始电压 V1 = 电压幅值 RDU = 第一边缘的持续时间 TDEL = 延迟时间
YTRIGEN TRIGEN TrigenOut gnd PARAM: rdu = 1.0e-3 tdel = 0.0001 v0 = 1.0

* 三角波至正弦波转换器 GAIN = 增益 VOFF = 偏移电压 VU = 输入电压上限 VL = 输入电压下限
YTRI2SIN TRI2SIN TrigenOut gnd Tri2SinOutp Tri2SinOutn PARAM : vu = 0.0 vl = 8

* 振幅调制器 SLR = 转换速率 VOFF = 偏移电压 FC = 载波频率
YAMM AMM sin1 gnd AmmOutp AmmOutn PARAM: voff = 0.5

* 脉冲幅度调制器 SLR = 转换速率 VOFF = 偏移电压 FC = 载波频率
YPAM PAM sin1 gnd PamOutp PamOutn PARAM: voff = 0.5
.ends